{"version":3,"sources":["components/Blog.js","components/Blogs.js","components/LoginForm.js","components/Message.js","services/blogs.js","services/login.js","App.js","index.js"],"names":["Blog","blog","title","author","Blogs","blogs","map","key","id","LoginForm","handleLogin","handleChangeUser","handleChangePassword","newUser","password","onSubmit","type","value","onChange","Message","message","className","status","token","setToken","newToken","getAll","axios","get","then","response","data","create","newObject","a","config","headers","Authorization","replace","console","log","post","request","login","credentials","res","BlogForm","newPost","titleHandler","authorHandler","urlHandler","submit","autoComplete","url","App","useState","setBlogs","username","setUsername","setNewUser","setPassword","setNewPost","error","errorMessage","setErrorMessage","useEffect","blogService","loggedUserJSON","window","localStorage","getItem","user","JSON","parse","event","preventDefault","loginService","setItem","stringify","setTimeout","handleLogout","clear","handleBlogSubmit","concat","toUpperCase","onClick","target","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.7982d85b.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Blog = ({ blog }) => (\r\n  <div>\r\n    {blog.title} {blog.author}\r\n  </div>\r\n)\r\n\r\nexport default Blog\r\n","import React from 'react'\nimport Blog from './Blog'\n\nconst Blogs = ({ blogs }) => {\n  return (\n  <div>\n    {blogs.map(blog =>\n      <Blog key={blog.id} blog={blog} />\n    )}\n  </div>\n  )\n}\nexport default Blogs","import React from 'react'\n\nconst LoginForm = ({handleLogin, handleChangeUser, handleChangePassword, newUser, password}) => (\n  <>\n    <form onSubmit={handleLogin}>\n      USERNAME\n      <input type=\"text\" value={newUser} onChange={handleChangeUser}/><br/>\n      PASSWORD\n      <input type=\"text\" value={password} onChange={handleChangePassword}/><br/>\n      <input type=\"submit\" value=\"LOGIN\" />\n    </form>\n  </>\n)\n\nexport default LoginForm","import React from 'react'\n\nconst Message = ({ message }) => (\n  <>\n  {message.message !== null &&\n    <div className=\"message\">\n      {message.status\n        ? <div className=\"error\">{message.message}</div>\n        : <div className=\"success\">{message.message}</div>\n      }\n    </div>\n  }\n  </>\n)\n\nexport default Message\n","import axios from 'axios'\nconst baseUrl = '/api/blogs'\n\nlet token = null\n\nconst setToken = ( newToken ) => {\n  token = `Bearer ${newToken}`\n}\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = async (newObject) => {\n  const config = {\n    headers: { Authorization: token.replace(/\\n/g, '') }\n  }\n  console.log(token)\n  const request = await axios.post(baseUrl, newObject, config)\n  return request.data\n}\n\nexport default {\n  setToken,\n  getAll,\n  create,\n }","import axios from 'axios'\nconst baseUrl = '/api/login'\n\nconst login = async credentials => {\n  const res = await axios.post(baseUrl, credentials)\n  return res.data\n}\n\n\nexport default { login }","import React, { useState, useEffect } from 'react'\n\nimport Blogs from './components/Blogs'\nimport LoginForm from './components/LoginForm'\nimport Message from './components/Message'\n\nimport blogService from './services/blogs'\nimport loginService from './services/login'\n\nimport './App.css'\n\nconst App = () => {\n  const [blogs, setBlogs] = useState([])\n  const [username, setUsername] = useState(null)\n  const [newUser, setNewUser] = useState('')\n  const [password, setPassword] = useState('')\n  const [newPost, setNewPost] = useState({ title: '', author: '', url: ''})\n  const [errorMessage, setErrorMessage] = useState({ message: null, error: false })\n\n  useEffect(() => {\n    blogService.getAll().then(blogs =>\n      setBlogs( blogs )\n    )\n  }, [])\n\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedInBlogUser')\n    if (loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON)\n      setUsername(user)\n      blogService.setToken(user.token)\n    }\n  }, [])\n\n  const handleChangeUser = (event) => {\n    setNewUser(event.target.value)\n  }\n\n  const handleChangePassword = (event) => {\n    setPassword(event.target.value)\n  }\n\n  const handleChangeTitle = (event) => {\n    setNewPost({...newPost, title: event.target.value})\n  }\n\n  const handleChangeAuthor = (event) => {\n    setNewPost({...newPost, author: event.target.value})\n  }\n\n  const handleChangeUrl = (event) => {\n    setNewPost({...newPost, url: event.target.value})\n  }\n\n  const handleLogin = async (event) => {\n    event.preventDefault()\n\n    try {\n      const user = await loginService.login({ username: newUser, password })\n      window.localStorage.setItem('loggedInBlogUser', JSON.stringify(user))\n\n      await blogService.setToken(user.token)\n      setUsername(user)\n      setNewUser('')\n      setPassword('')\n    } catch (err) {\n\n      setErrorMessage({ message: 'Wrong username or password', status: true })\n\n      setTimeout(() => {\n        setErrorMessage({ message: null, error: false })\n      }, 3000)\n    }\n  }\n\n  const handleLogout = async (event) => {\n    event.preventDefault()\n\n    window.localStorage.clear()\n    setUsername(null)\n\n    setErrorMessage({ message: 'Logout success', status: false })\n    setTimeout(() => {\n      setErrorMessage({ message: null, error: false })\n    }, 3000)\n  }\n\n  const handleBlogSubmit = async (event) => {\n    event.preventDefault()\n    try {\n      const post = {\n        title: newPost.title,\n        author: newPost.author,\n        url: newPost.url,\n      }\n      setBlogs(blogs.concat(post))\n      setNewPost({ title: '', author: '', url: ''})\n      await blogService.create(post)\n      setErrorMessage({ message: `a new blog ${post.title} added`, status: false })\n      setTimeout(() => {\n        setErrorMessage({ message: null, error: false })\n      }, 3000)\n    } catch (err) {\n      setErrorMessage({ message: `${err}`, status: true })\n      setTimeout(() => {\n        setErrorMessage({ message: null, error: false })\n      }, 3000)\n    }\n  }\n\n  return (\n    <div>\n      <Message message={errorMessage} />\n      {username !== null ?\n        <div>\n          <h2>BLOGS</h2>\n          <p>{username.username.toUpperCase()} LOGGED IN<br />\n            <button onClick={handleLogout}>LOGOUT</button>\n          </p>\n          <BlogForm\n            newPost={newPost}\n            titleHandler={handleChangeTitle}\n            authorHandler={handleChangeAuthor}\n            urlHandler={handleChangeUrl}\n            submit={handleBlogSubmit}/>\n          <Blogs blogs={blogs}/>\n        </div> :\n        <LoginForm\n          handleLogin={handleLogin}\n          handleChangeUser={handleChangeUser}\n          handleChangePassword={handleChangePassword}\n          newUser={newUser}\n          password={password}\n        />\n      }\n    </div>\n  )\n}\n\nconst BlogForm = ({ newPost, titleHandler, authorHandler, urlHandler, submit }) => {\n  return (\n  <>\n    <form onSubmit={submit}>\n      <div>TITLE</div>\n      <input type=\"text\" value={newPost.title} onChange={titleHandler} autoComplete=\"off\"/><br />\n      <div>AUTHOR</div>\n      <input type=\"text\" value={newPost.author} onChange={authorHandler} autoComplete=\"off\"/><br />\n      <div>URL</div>\n      <input type=\"text\" value={newPost.url} onChange={urlHandler} autoComplete=\"off\" /><br />\n      <input type=\"submit\" value=\"POST\" />\n    </form><br/>\n  </>\n  )\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}